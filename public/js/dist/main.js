(()=>{"use strict";const e=(e,t)=>{document.getElementById(e).addEventListener("submit",(function(e){e.preventDefault();const o=new FormData(this);fetch(t,{method:"post",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object.fromEntries(o))}).then((e=>(console.log(e),e.redirected&&(window.location.href=e.url),e.json()))).then((e=>{let o;"/api/auth/signup"===t?o=document.querySelector(".pop-up__signup .pop-up__errors"):"/api/auth/signin"===t&&(o=document.querySelector(".pop-up__login .pop-up__errors")),o&&(o.innerText=e.error,setTimeout((()=>{o.innerText=""}),5e3))})).catch((e=>{console.error(e)}))}))},t=(e,t=500)=>"none"===window.getComputedStyle(e).display?((e,t)=>{e.style.removeProperty("display");let{display:o}=window.getComputedStyle(e);"none"===o&&(o="block"),e.style.display=o;const n=e.offsetHeight;e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.style.overflow="hidden",e.style.boxSizing="border-box",e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=`${t}ms`,e.style.height=`${n}px`,e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),window.setTimeout((()=>{e.style.removeProperty("height"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)})(e,t):((e,t)=>{e.style.transitionProperty="height, margin, padding",e.style.transitionDuration=`${t}ms`,e.style.boxSizing="border-box",e.style.height=`${e.offsetHeight}px`,e.style.height=0,e.style.paddingTop=0,e.style.paddingBottom=0,e.style.marginTop=0,e.style.marginBottom=0,e.style.overflow="hidden",window.setTimeout((()=>{e.style.display="none",e.style.removeProperty("height"),e.style.removeProperty("padding-top"),e.style.removeProperty("padding-bottom"),e.style.removeProperty("margin-top"),e.style.removeProperty("margin-bottom"),e.style.removeProperty("overflow"),e.style.removeProperty("transition-duration"),e.style.removeProperty("transition-property")}),t)})(e,t);function o(e){e.style.opacity=1,function t(){(e.style.opacity-=.1)<=0?(e.style.display="none",e.style.opacity=null):requestAnimationFrame(t)}()}function n(e,t){e.style.opacity=0,e.style.display=t||"block",function t(){let o=parseFloat(e.style.opacity);(o+=.1)>1||(e.style.opacity=o,requestAnimationFrame(t))}()}const i=document.querySelector(".log-in"),r=document.querySelector(".pop-up__login"),s=document.querySelector(".cancel-login"),c=document.querySelector(".overlay"),l=document.querySelector(".sign-up"),a=document.querySelector(".pop-up__signup"),u=document.querySelector(".cancel-signup"),y=document.querySelector(".log-in-mbl"),d=document.querySelector(".sign-up-mbl");i.onclick=function(){t(r),n(c)},s.addEventListener("click",(function(e){e.preventDefault(),t(r),o(c)})),c.addEventListener("click",(function(e){o(r),o(c),o(a)})),l.onclick=function(){t(a),n(c)},u.addEventListener("click",(function(e){e.preventDefault(),t(a),o(c)})),y.onclick=function(){t(r),n(c)},d.onclick=function(){t(a),n(c)};const p=document.querySelector(".mobile-menu"),m=document.querySelector(".menu-list");p.onclick=function(){m.classList.contains("open")?m.classList.remove("open"):m.classList.add("open")};const g=document.querySelector(".search-icon"),f=document.querySelector(".search-wrap");g.onclick=function(){f.classList.contains("open")?f.classList.remove("open"):f.classList.add("open")};const v=document.querySelector(".mobile-rubrics-btn-wrap"),h=document.querySelector(".rubrics-mbl-container");v.onclick=function(){h.classList.contains("open-rubric")?h.classList.remove("open-rubric"):h.classList.add("open-rubric")},(()=>{const e=document.querySelector(".add-favourite");e&&(e.onclick=async function(){const{articleId:t}=e.dataset,{userId:o}=e.dataset;try{const n=await fetch(`/api/users/${o}`,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify({favourites:`${t}`})}),i=await n.json();(i.favourites&&!e.classList.contains("add-favourite-active")||!i.favourites&&e.classList.contains("add-favourite-active"))&&e.classList.toggle("add-favourite-active")}catch(e){console.log(e)}})})(),e("signup__form","/api/auth/signup"),e("signin__form","/api/auth/signin"),document.querySelector(".instagram-widget__hide-button").onclick=function(){const e=document.querySelector(".instagram-widget__hidden-photos"),t=document.querySelector(".instagram-widget__hide-button");e.classList.remove("hidden"),t.remove()},function(){const e=localStorage.getItem("cookieDate"),t=document.getElementById("cookie_notification"),o=t.querySelector(".cookie_accept");(!e||+e+31536e6<Date.now())&&t.classList.add("show"),o.addEventListener("click",(function(){localStorage.setItem("cookieDate",Date.now()),t.classList.remove("show")}))}()})();